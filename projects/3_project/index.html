<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Odometry | Jessica Hunter </title> <meta name="author" content="Jessica Hunter"> <meta name="description" content="Control Theory the next step"> <meta name="keywords" content="jekyll, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jhunter533.github.io/projects/3_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Jessica</span> Hunter </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Odometry</h1> <p class="post-description">Control Theory the next step</p> </header> <article> <h3 id="what-is-odometry">What is Odometry?</h3> <p>Odometry is the process of using sensor data to estimate change in position over time. Unlike path planning algorithms which determine how you move from A to B, odometry on the other hand is the algorithm underlying path planning to determine global locations. This is done through a given starting location, coordinate axis, and the slow accumalation of change in position data.</p> <p>Odometry uses the fundamental thereom of calculus to say if you know the change in position and the starting position we can find the final position.</p> <p>This algorithm relies heavily on accurate sensors for tracking position data. Newer implementation schemes use 3d cameras, lidar, and other sensors to create SLAM. However my implementation relies on older simpler techniques using the Vex V5 system. This is extensivley documented in various Vex sites and forums. Most of these were used in my research.</p> <p>My robot is a 4 wheeled tank drive design that incorporates two perpendicular dead wheels and an IMU in the center. A key to any odometry system is understanding the kinematics of what your tracking. For instance a car with ackerman steering operates very differently to a tank drive vehicle resulting in very different kinematics for their motion. Pictured below are an example of tracking wheels.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/track-480.webp 480w,/assets/img/track-800.webp 800w,/assets/img/track-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/track.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Tracking wheel design </div> <p>The following image shows some of the kinematics for a two wheel differential drive robot. The design of tank drive robot I used is nearly identical kinematically since it two is a differential drive and the only major difference is the turning due to the 4 wheels. The y is tracked by the frontward motion and x is tracking the sideways motion. A robot the is able to strafe has more kinematics to account for. However, the tank drive cannot drive sideways but it can drift which the reason x needs to be accounted for but accuracy is not the most paramount thing.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/t1-480.webp 480w,/assets/img/t1-800.webp 800w,/assets/img/t1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/t1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/t2-480.webp 480w,/assets/img/t2-800.webp 800w,/assets/img/t2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/t2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> T </div> <h3 id="logic">Logic</h3> <ol> <li>Store sensor values</li> <li>Calculate the local change</li> <li>Update values</li> <li>Convert to global The primary math behind the kinematics was gathered from 5225 Pi-lons document on the topic. The only changes made were when converting to global coordinates. While they suggest one of many methods that simplifies complex multidimensional calculus such as polar coordinates this would not function with local coordinate axis I assumed. So I used the following equation to get the change in global coordinates. \(\Delta Y_{G}=\Delta X_{L} \sin(\theta)+ \Delta Y_{L} \cos(\theta)\) \(\DeltaX_{G}=\Delta X_{L} \cos(\theta)- Delta Y_{L} \sin(\theta)\) This equation was before I aquired knowledge of how to do this in simpler ways with more calculus principles so instead I simplified a matrix to describe the rotation of a coordinate plane.</li> </ol> <h3 id="pid">PID</h3> <p>As mentioned in my PID project I eventually encorporated PIDâ€™s to control the drivetrain based upon this coordinate system. My system uses radians and rotational wheel degrees traveled internally but did take more human inputs like inches. However, I learned after this project that even debugging information should be human readable. Originally my code outputed debugging information in the internal units since I learned to read these units but for other people this is not useful. Safe to say this was a valuable lesson I strive to remember in future projects.</p> <p>The distance driven can be calculated as vectors which use polar or parametric equations to correctly convert from a local coordinate to global coordinate. The use of local coordinates is done to simplify math by starting at origin at each time step and accounting for the offset later in global coordinates. While this simplification especially with Vex sensors can introduce some inaccuracy it is largely neglagable because the robot is only expected to be used in a 12 x 12 arena.</p> <p>For my robot I opted to use an inertial sensor rather than a third tracking wheel. With vex sensors the third wheel was used before an accurate inertial sensor got released but even then if properly done it can be just as accurate. An inertial sensor however is smaller than the third wheel and allowed us to worry less about the implementation of these wheels. This change does change the math because we no longer need to calculate the angle or keep track of it other than through the sensor output.</p> <h3 id="graphics">Graphics</h3> <p>I utilized a graphic for debugging that created the standard Vex arena on the screen. It moved a small circular sprite with the correct movements the odometry was tracking to help debugging internal vs external expectations. Typically this screen was kept off since it was just for my initial development debugging and not relying on any algorithms.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/g1-480.webp 480w,/assets/img/g1-800.webp 800w,/assets/img/g1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/g1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/g2-480.webp 480w,/assets/img/g2-800.webp 800w,/assets/img/g2-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/g2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> T </div> <h3 id="code">Code</h3> <p>The following code is my eventual object oriented refactor of the odometry code. The drawing function is specifically for the graphical screen mentioned above.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">draw</span><span class="p">()</span> <span class="p">{</span>
    
    <span class="kt">int</span> <span class="n">textadjustvalue</span> <span class="o">=</span> <span class="mi">55</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rowadjust</span> <span class="o">=</span> <span class="mi">39</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">fieldscale</span><span class="o">=</span><span class="mf">1.66548042705</span><span class="p">;</span>
    <span class="c1">//Sets graphical things for our display </span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenWidth</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="n">vex</span><span class="o">::</span><span class="n">color</span> <span class="n">redtile</span> <span class="o">=</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">60</span> <span class="p">);</span>
    <span class="n">vex</span><span class="o">::</span><span class="n">color</span> <span class="n">bluetile</span> <span class="o">=</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">77</span><span class="p">,</span> <span class="mi">146</span> <span class="p">);</span>
    <span class="n">vex</span><span class="o">::</span><span class="n">color</span> <span class="n">graytile</span> <span class="o">=</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">53</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFillColor</span><span class="p">(</span><span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">));</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">vex</span><span class="o">::</span><span class="n">fontType</span><span class="o">::</span><span class="n">mono20</span><span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">99</span> <span class="p">)</span> <span class="p">);</span>

    <span class="c1">//Displays all the field tiles, text of odom values, and a dot symbolizing the robot</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">printAt</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">20</span> <span class="o">+</span> <span class="n">textadjustvalue</span><span class="p">,</span> <span class="s">"X-Pos:%f"</span><span class="p">,</span><span class="n">xPosGlobal</span><span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">48</span> <span class="p">)</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">printAt</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span> <span class="o">+</span> <span class="n">textadjustvalue</span><span class="p">,</span> <span class="s">"Y-Pos:%f"</span><span class="p">,</span><span class="n">yPosGlobal</span><span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">31</span> <span class="p">)</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">printAt</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">80</span> <span class="o">+</span> <span class="n">textadjustvalue</span><span class="p">,</span> <span class="s">"Theta:%f"</span><span class="p">,</span><span class="n">absoluteAngle</span><span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">83</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">printAt</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span><span class="mi">110</span> <span class="o">+</span> <span class="n">textadjustvalue</span><span class="p">,</span> <span class="s">"Angle:%f"</span><span class="p">,</span><span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">deg</span><span class="p">));</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span> <span class="p">)</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFillColor</span><span class="p">(</span> <span class="n">graytile</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">234</span><span class="p">,</span> <span class="mi">234</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="n">rowadjust</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFillColor</span><span class="p">(</span> <span class="n">redtile</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFillColor</span><span class="p">(</span> <span class="n">bluetile</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawRectangle</span><span class="p">(</span> <span class="mi">245</span><span class="o">+</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">rowadjust</span><span class="p">),</span> <span class="mi">158</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">39</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span> <span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setFillColor</span><span class="p">(</span> <span class="n">vex</span><span class="o">::</span><span class="n">color</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">);</span>
    
    <span class="c1">//This draws the robot body for position and arm for angle</span>
    <span class="kt">double</span> <span class="n">yfieldvalue</span> <span class="o">=</span> <span class="p">((</span><span class="o">-</span><span class="n">yPosGlobal</span><span class="o">*</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">)</span><span class="o">/</span><span class="mi">360</span><span class="o">*</span><span class="n">fieldscale</span><span class="p">)</span><span class="o">+</span><span class="mi">245</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
    <span class="kt">double</span> <span class="n">xfieldvalue</span> <span class="o">=</span> <span class="p">((</span><span class="n">xPosGlobal</span><span class="o">*</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">)</span><span class="o">/</span><span class="mi">360</span><span class="o">*</span><span class="n">fieldscale</span><span class="p">)</span><span class="o">+</span><span class="mi">245</span><span class="p">;</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawCircle</span><span class="p">(</span><span class="n">xfieldvalue</span><span class="p">,</span> <span class="n">yfieldvalue</span><span class="p">,</span> <span class="mi">10</span> <span class="p">);</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setPenWidth</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>
    <span class="c1">//Line angle calculation:</span>
    <span class="c1">//x1 and y1 are the robot's coordinates, which in our case is xfieldvalue and yfieldvalue</span>
    <span class="c1">//angle is the angle the robot is facing, which in our case is Theta</span>
    <span class="c1">//(x1,y1, x1 + line_length*cos(angle),y1 + line_length*sin(angle)) = (x1,y1,x2,y2)</span>
    <span class="n">Brain</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">xfieldvalue</span><span class="p">,</span> <span class="n">yfieldvalue</span><span class="p">,</span> <span class="n">xfieldvalue</span><span class="o">+</span><span class="n">cos</span><span class="p">(</span><span class="n">absoluteAngle</span><span class="p">)</span><span class="o">*</span><span class="mi">15</span><span class="p">,</span> <span class="n">yfieldvalue</span><span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">absoluteAngle</span><span class="p">)</span> <span class="o">*</span><span class="mi">15</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">trackPosition</span><span class="p">(){</span>
    <span class="n">absoluteAngle</span> <span class="o">=</span> <span class="n">ConvertToRadians</span><span class="p">(</span><span class="o">-</span><span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">());</span>
    <span class="n">startAngle</span> <span class="o">=</span> <span class="n">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
    <span class="c1">//printf("posx %f",xPosGlobal);</span>
    <span class="n">startPosX</span><span class="o">=</span><span class="p">(</span><span class="n">xIn</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>
    <span class="c1">//printf("startx %f\n",startPosX);</span>
    <span class="n">startPosY</span> <span class="o">=</span> <span class="p">(</span><span class="n">yIn</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>
    <span class="n">yPosGlobal</span> <span class="o">=</span> <span class="n">startPosY</span><span class="p">;</span>
    <span class="n">xPosGlobal</span> <span class="o">=</span> <span class="n">startPosX</span><span class="p">;</span>
    <span class="n">sTrackDistance</span> <span class="o">=</span> <span class="p">(</span><span class="n">sDistanceInput</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>
    <span class="n">rTrackDistance</span> <span class="o">=</span> <span class="p">(</span><span class="n">rDistanceInput</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
        <span class="c1">//change in encoder value between iterations</span>
        <span class="n">deltaR</span> <span class="o">=</span> <span class="p">(</span><span class="n">Right</span><span class="p">.</span><span class="n">position</span><span class="p">(</span><span class="n">deg</span><span class="p">)</span><span class="o">-</span><span class="n">prevR</span><span class="p">);</span>
        <span class="n">deltaS</span> <span class="o">=</span> <span class="p">(</span><span class="n">Back</span><span class="p">.</span><span class="n">position</span><span class="p">(</span><span class="n">deg</span><span class="p">)</span><span class="o">-</span> <span class="n">prevS</span><span class="p">);</span>
        <span class="c1">//printf("right pos%f\n",Right.position(deg));</span>

        <span class="c1">//previous encoder value</span>
        <span class="n">prevR</span> <span class="o">=</span> <span class="n">Right</span><span class="p">.</span><span class="n">position</span><span class="p">(</span><span class="n">deg</span><span class="p">);</span>
        <span class="n">prevS</span> <span class="o">=</span> <span class="n">Back</span><span class="p">.</span><span class="n">position</span><span class="p">(</span><span class="n">deg</span><span class="p">);</span>
        
        <span class="c1">//total change in encoder over all time</span>
        <span class="n">totalDeltaDistR</span> <span class="o">+=</span> <span class="n">deltaR</span><span class="p">;</span>

        <span class="c1">//the current heading of the robot converted to radians</span>
        <span class="n">absoluteAngle</span><span class="o">=</span><span class="n">ConvertToRadians</span><span class="p">(</span><span class="o">-</span><span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">deg</span><span class="p">));</span>


        <span class="c1">//the change in theta between iterations</span>
        <span class="n">deltaTheta</span> <span class="o">=</span> <span class="n">absoluteAngle</span> <span class="o">-</span> <span class="n">prevTheta</span><span class="p">;</span>
        <span class="c1">//previous angle</span>
        <span class="n">prevTheta</span> <span class="o">=</span> <span class="n">absoluteAngle</span><span class="p">;</span>

        <span class="c1">//if the robot's change in theta exists then we moved in 2 axis not just 1</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">deltaTheta</span> <span class="o">!=</span><span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">halfAngle</span> <span class="o">=</span> <span class="n">deltaTheta</span><span class="o">/</span><span class="mi">2</span><span class="p">;</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">deltaR</span><span class="o">/</span><span class="n">deltaTheta</span><span class="p">;</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">deltaS</span><span class="o">/</span><span class="n">deltaTheta</span><span class="p">;</span>
            <span class="c1">//The change in pose in this frame</span>
            <span class="n">deltaXLocal</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">halfAngle</span><span class="p">)</span> <span class="o">*</span><span class="p">(</span><span class="n">r2</span><span class="o">-</span><span class="n">sTrackDistance</span><span class="p">);</span>
            <span class="n">deltaYLocal</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">halfAngle</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="n">rTrackDistance</span><span class="p">);</span>

        <span class="c1">//if the angle didn't change then we only moved in one direction</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//This is not likely to happen because drift exists</span>
            <span class="n">deltaXLocal</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltaS</span><span class="p">);</span>
            <span class="n">deltaYLocal</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltaR</span><span class="p">);</span>
            <span class="n">halfAngle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">avgTheta</span><span class="o">=</span><span class="n">absoluteAngle</span><span class="o">-</span><span class="n">halfAngle</span><span class="p">;</span>
        <span class="c1">//the change in theta of the coordinates</span>
        <span class="c1">//Converting the local pose change to a global one</span>
        <span class="n">deltaYGlobal</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltaXLocal</span><span class="p">)</span> <span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">avgTheta</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">deltaYLocal</span><span class="p">)</span> <span class="o">*</span> <span class="nf">sin</span><span class="p">(</span><span class="n">avgTheta</span><span class="p">);</span>
        <span class="n">deltaXGlobal</span> <span class="o">=</span> <span class="p">(</span><span class="n">deltaYLocal</span><span class="p">)</span> <span class="o">*</span> <span class="nf">cos</span><span class="p">(</span><span class="n">avgTheta</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">deltaXLocal</span><span class="p">)</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">avgTheta</span><span class="p">);</span>

        <span class="c1">//adds the change to the original coordinates yielding new coordinates</span>
        <span class="n">xPosGlobal</span> <span class="o">+=</span> <span class="p">(</span><span class="n">deltaXGlobal</span><span class="p">);</span>
        <span class="n">yPosGlobal</span> <span class="o">+=</span> <span class="p">(</span><span class="n">deltaYGlobal</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Posx: %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">xPosGlobal</span><span class="p">);</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Posy: %f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">yPosGlobal</span><span class="p">);</span>
        <span class="c1">//draws coordinate grid on brain</span>
        <span class="n">draw</span><span class="p">();</span>

        <span class="n">task</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getXPosGlobal</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">xPosGlobal</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getYPosGlobal</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">yPosGlobal</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getDeltaXG</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">deltaXGlobal</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getDeltaYG</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">deltaYGlobal</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getAbsoluteAngle</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">absoluteAngle</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">getPrevTheta</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">prevTheta</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">setXIn</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="p">){</span>
    <span class="n">xIn</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">setYIn</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="p">){</span>
    <span class="n">yIn</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">setAng</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">){</span>
    <span class="n">startAngle</span><span class="o">=</span><span class="n">a</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">setSDistInput</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="p">){</span>
    <span class="n">sDistanceInput</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">Odometry</span><span class="o">::</span><span class="n">setRDistInput</span><span class="p">(</span><span class="kt">double</span> <span class="n">i</span><span class="p">){</span>
    <span class="n">rDistanceInput</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//to use Odometry odom;</span>
<span class="c1">//task odom.trackposition;</span>
</code></pre></div></div> <p>I will note that the way this runs in the Vex V5 system was you needed to create a task that will run this function in the background constantly so that it could run below blocking functions that may rely on accuracy in the location data returned from it.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> Â© Copyright 2024 Jessica Hunter. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script src="/assets/js/bibsearch.js?a8796296a5e2f80c5e498cdd51d7761e" type="module"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in &#39;_pages/cv.md&#39;. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"projects-sql-ssrs",title:"SQL/SSRS",description:"Database Work",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-pid",title:"PID",description:"Control Theory",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-odometry",title:"Odometry",description:"Control Theory the next step",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-machine-learning",title:"Machine Learning",description:"The Basics of Supervised",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-cad",title:"CAD",description:"A Summary",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-vex-v5-competitions",title:"Vex V5 Competitions",description:"Overall Work",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>