<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> PID | Jessica Hunter </title> <meta name="author" content="Jessica Hunter"> <meta name="description" content="Control Theory"> <meta name="keywords" content="jekyll, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://jhunter533.github.io/projects/2_project/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Jessica</span> Hunter </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">PID</h1> <p class="post-description">Control Theory</p> </header> <article> <h3 id="what-is-pid">What is PID?</h3> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/PID_Graphic-480.webp 480w,/assets/img/PID_Graphic-800.webp 800w,/assets/img/PID_Graphic-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/PID_Graphic.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="PID_Graphic" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Loose graphical explanation of PID </div> <p>PID is an acronym for Proportional Integral Derivative. A key algorithm in control theory. A PID allows you to slow an approach to reach a target and minimize overshoot and undershooting. This algorithm has wide uses from robotics to thermostats.</p> <p>You can think of a PID as representing the error between the start position and the target. By breaking this total into smaller parts following calculus principles you can gain the derivative and integral. This algorithm is highly customizable allowing fine tuning for unique problems and solutions.</p> <p>PID’s are mainly used in a closed loop system where you want it to end at the target. The three gains need to be tuned for each system.</p> <p>For instance in my use I used PID throughout my robotics experience to increase the accuracy of approaching a target position or angle. With my implementation the robot error approaches 0 then begins to use the integral values to push it that last leg of the approach.</p> <p>This algorithm can be done with several sensors depending on use. For my use I used the Vex v5 inertial sensor. It was used to reliably turn to face an absolute angle in refernence to the starting angle being 0 (though this can easily be adjusted). My implementation allowed the robot to slow down as it approached a target and turn back if the angle is overshot and parameters are tuned correctly.</p> <p>As far as the range of kI,kD,kP for Vex go, typically kP is between .1 and .2, kD is between .01 and kP, kI is usually close to kD minus a magnitude.</p> <h3 id="original-pid-code">Original PID Code</h3> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Used to count the number of turns for output data only</span>
<span class="kt">int</span> <span class="n">turnCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// Relative degree tracking</span>
<span class="kt">int</span> <span class="n">angleTracker</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">// Weighted factor of porportion error</span>
<span class="kt">double</span> <span class="n">kP</span> <span class="o">=</span> <span class="mf">0.19</span><span class="p">;</span>
<span class="c1">// Weighted factor of integral error</span>
<span class="kt">double</span> <span class="n">kI</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
<span class="c1">// Weighted factor of the derivated error</span>
<span class="kt">double</span> <span class="n">kD</span> <span class="o">=</span> <span class="mf">.1</span><span class="p">;</span>
<span class="c1">// Max speed in Volts for motors</span>
<span class="kt">double</span> <span class="n">maxSpeed</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="c1">// The angle difference from error when integral adjustments turns on</span>
<span class="kt">int</span> <span class="n">turnThreshold</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
<span class="c1">// Tolerance for approximating the target angle</span>
<span class="kt">double</span> <span class="n">turnTolerance</span> <span class="o">=</span> <span class="mf">.5</span><span class="p">;</span>
<span class="c1">// Total number of iterations to exit while loop</span>
<span class="kt">int</span> <span class="n">maxIter</span> <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>

<span class="c1">// Turning Function</span>
<span class="kt">void</span> <span class="nf">turnPID</span><span class="p">(</span><span class="kt">double</span> <span class="n">angleTurn</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//  Distance to target in degrees</span>
  <span class="kt">double</span> <span class="n">error</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">//  Error degree from the last iteration</span>
  <span class="kt">double</span> <span class="n">prevError</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// Derivative of the error. The slope between iterations</span>
  <span class="kt">double</span> <span class="n">derivative</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// Accumulated error after threashold. Summing error</span>
  <span class="kt">double</span> <span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="c1">// Iterations of the loop. Counter used to exit loop if not converging</span>
  <span class="kt">double</span> <span class="n">iter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="c1">// Automated error correction loop</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">)</span> <span class="o">-</span> <span class="n">angleTurn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">turnTolerance</span> <span class="o">&amp;&amp;</span> <span class="n">iter</span> <span class="o">&lt;</span> <span class="n">maxIter</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">iter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">angleTurn</span> <span class="o">-</span> <span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">);</span>
    <span class="n">derivative</span> <span class="o">=</span> <span class="n">error</span> <span class="o">-</span> <span class="n">prevError</span><span class="p">;</span>
    <span class="n">prevError</span> <span class="o">=</span> <span class="n">error</span><span class="p">;</span>

    <span class="c1">// Checking if error passes threshold to build the integral</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">turnThreshold</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">integral</span> <span class="o">+=</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Voltage to use. PID calculation</span>
    <span class="kt">double</span> <span class="n">powerDrive</span> <span class="o">=</span> <span class="n">error</span> <span class="o">*</span> <span class="n">kP</span> <span class="o">+</span> <span class="n">derivative</span> <span class="o">*</span> <span class="n">kD</span> <span class="o">+</span> <span class="n">integral</span> <span class="o">*</span> <span class="n">kI</span><span class="p">;</span>

    <span class="c1">// Capping voltage to max speed</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">powerDrive</span> <span class="o">&gt;</span> <span class="n">maxSpeed</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">powerDrive</span> <span class="o">=</span> <span class="n">maxSpeed</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">powerDrive</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">maxSpeed</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">powerDrive</span> <span class="o">=</span> <span class="o">-</span><span class="n">maxSpeed</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Send to motors</span>
    <span class="n">LeftDriveSmart</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span> <span class="n">powerDrive</span><span class="p">,</span> <span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>
    <span class="n">RightDriveSmart</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span> <span class="o">-</span><span class="n">powerDrive</span><span class="p">,</span> <span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>

    <span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="c1">// Angle achieved, brake robot</span>
  <span class="n">LeftDriveSmart</span><span class="p">.</span><span class="n">stop</span><span class="p">(</span><span class="n">brake</span><span class="p">);</span>
  <span class="n">RightDriveSmart</span><span class="p">.</span><span class="n">stop</span><span class="p">(</span><span class="n">brake</span><span class="p">);</span>

  <span class="c1">// Tuning data, output to screen</span>
  <span class="n">turnCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">error</span> <span class="o">=</span> <span class="n">angleTurn</span> <span class="o">-</span> <span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">);</span>
  <span class="n">derivative</span> <span class="o">=</span> <span class="n">error</span> <span class="o">-</span> <span class="n">prevError</span><span class="p">;</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">clearScreen</span><span class="p">();</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Turn #: %d"</span><span class="p">,</span> <span class="n">turnCount</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"iter: %.0f"</span><span class="p">,</span> <span class="n">iter</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"error: %.5f"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"derivative: %.5f"</span><span class="p">,</span> <span class="n">derivative</span><span class="p">);</span>
  <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>The above code was the original turning PID structure for a blocking function in the Vex V5 system.</p> <h3 id="furthur-development">Furthur Development</h3> <p>During my competition seasons with Vex I observed the need for a second PID. If my first PID came about to solve the inacuracy observed in a robot’s turning then the second came about similarly. When the robot drove forward to meet a certain target distance the wheels would often slip leading to inaccuracy. Thus I reimplementated a PID to drive for a target distance.</p> <p>This PID originally worked for Vex V5 IME’s in the V5 motors. This was eventualy improved to use the Vex Quad Encoders on a dead wheel. The dead wheel was designed to be a free spinning wheel with a sensor attached connected to the chassis along a pivot with a tension mechanism in the form of a rubber band. This would minimize tracking slippage in data increasing accuracy. To increase accuracy the driving PID used degrees for internal units. This meant a user could call the function for 12 inches and the program would do the math in rotational degrees of the wheel. The accuracy for a well tuned drive PID model would be within .3 of an inch of a target.</p> <p>By implementing several PID’s in the Vex system I created an understanding of the basics of control theory. Having learned the key underlying structure of the base algorithm it can be implemented in various other settings.</p> <p>I eventually created a third PID that functioned with Odometry to both turn and drive to a target coordinate point at the same time. During this time I refactored my previous algorithms to use object orientation and create a more simplistic structure.</p> <h3 id="final-code-iteration">Final Code Iteration</h3> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define wheelDiameter 3.25
</span><span class="c1">//Setters and getters</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setMaxSpeed</span><span class="p">(</span><span class="kt">double</span> <span class="n">s</span><span class="p">){</span>
    <span class="n">maxSpeed</span><span class="o">=</span><span class="n">s</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setMaxIter</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
    <span class="n">maxIter</span><span class="o">=</span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setTurnThresh</span><span class="p">(</span><span class="kt">int</span> <span class="n">t</span><span class="p">){</span>
    <span class="n">turnThreshold</span><span class="o">=</span><span class="n">t</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setTurnTolerance</span><span class="p">(</span><span class="kt">double</span> <span class="n">tol</span><span class="p">){</span>
    <span class="n">turnToTolerance</span><span class="o">=</span><span class="n">tol</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setkI</span><span class="p">(</span><span class="kt">double</span> <span class="n">I</span><span class="p">){</span>
    <span class="n">kI</span><span class="o">=</span><span class="n">I</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setkD</span><span class="p">(</span><span class="kt">double</span> <span class="n">D</span><span class="p">){</span>
    <span class="n">kD</span><span class="o">=</span><span class="n">D</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setkP</span><span class="p">(</span><span class="kt">double</span> <span class="n">P</span><span class="p">){</span>
    <span class="n">kP</span><span class="o">=</span><span class="n">P</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setiBound</span><span class="p">(</span><span class="kt">double</span> <span class="n">b</span><span class="p">){</span>
    <span class="n">iBound</span><span class="o">=</span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setThreshold</span><span class="p">(</span><span class="kt">double</span> <span class="n">t</span><span class="p">){</span>
    <span class="n">threshold</span><span class="o">=</span><span class="n">t</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getXVector</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">xVector</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getYVector</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">yVector</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getBRPower</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">BackRightPower</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getBLPower</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">BackLeftPower</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getFRPower</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">FrontRightPower</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">double</span> <span class="n">PID</span><span class="o">::</span><span class="n">getFLPower</span><span class="p">(){</span>
    <span class="k">return</span> <span class="n">FrontLeftPower</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setMaxSpeedT</span><span class="p">(</span><span class="kt">double</span> <span class="n">s</span><span class="p">){</span><span class="n">maxSpeedT</span><span class="o">=</span><span class="n">s</span><span class="p">;}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setkIT</span><span class="p">(</span><span class="kt">double</span> <span class="n">I</span><span class="p">){</span><span class="n">kIT</span><span class="o">=</span><span class="n">I</span><span class="p">;}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setKDT</span><span class="p">(</span><span class="kt">double</span> <span class="n">D</span><span class="p">){</span><span class="n">kDT</span><span class="o">=</span><span class="n">D</span><span class="p">;}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setkPT</span><span class="p">(</span><span class="kt">double</span> <span class="n">P</span><span class="p">){</span><span class="n">kPT</span><span class="o">=</span><span class="n">P</span><span class="p">;}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">setiBoundT</span><span class="p">(</span><span class="kt">double</span> <span class="n">b</span><span class="p">){</span><span class="n">iBoundT</span><span class="o">=</span><span class="n">b</span><span class="p">;}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">driveToNS</span><span class="p">(</span><span class="n">Odometry</span> <span class="o">&amp;</span><span class="n">Odom</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">//ns and turn to need different pid values in same instance and need to call odom functions from odom object</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">pow</span><span class="p">(</span><span class="n">yTargetLocation</span> <span class="o">-</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getYPosGlobal</span><span class="p">(),</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="n">pow</span><span class="p">(</span><span class="n">xTargetLocation</span><span class="o">-</span><span class="n">Odom</span><span class="p">.</span><span class="n">getXPosGlobal</span><span class="p">(),</span><span class="mi">2</span><span class="p">));</span>

    <span class="n">derivative</span> <span class="o">=</span> <span class="n">error</span> <span class="o">-</span> <span class="n">prevError</span><span class="p">;</span>

    <span class="n">prevError</span> <span class="o">=</span> <span class="n">error</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">iBound</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">integral</span> <span class="o">+=</span> <span class="n">error</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">powerDrive</span> <span class="o">=</span><span class="p">((</span><span class="n">error</span> <span class="o">*</span> <span class="n">kP</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">derivative</span> <span class="o">*</span> <span class="n">kD</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">integral</span> <span class="o">*</span><span class="n">kI</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">powerDrive</span><span class="o">&gt;</span><span class="n">maxSpeed</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">powerDrive</span><span class="o">=</span><span class="n">maxSpeed</span><span class="p">;</span>
    <span class="p">}</span> 
<span class="p">}</span>

    <span class="c1">//This turn to PID is specifically for the Odometry movement because it relies on vectors instead of a target angle</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">turnTo</span><span class="p">(</span><span class="n">Odometry</span> <span class="o">&amp;</span><span class="n">Odom</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">errorT</span> <span class="o">=</span> <span class="p">((</span><span class="n">atan2</span><span class="p">(</span><span class="n">yVector</span><span class="p">,</span><span class="n">xVector</span><span class="p">))</span><span class="o">-</span><span class="n">Odom</span><span class="p">.</span><span class="n">getAbsoluteAngle</span><span class="p">());</span>

    <span class="n">derivativeT</span> <span class="o">=</span> <span class="n">errorT</span> <span class="o">-</span> <span class="n">prevErrorT</span><span class="p">;</span>
    <span class="n">prevErrorT</span> <span class="o">=</span> <span class="n">errorT</span><span class="p">;</span>
<span class="c1">//  turnPID.iBound = .2;</span>
  <span class="c1">//turnPID.threshold = 0.5; cause its in radians here</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">errorT</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">iBoundT</span> <span class="o">&amp;&amp;</span> <span class="n">errorT</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">integralT</span> <span class="o">+=</span> <span class="n">errorT</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">integralT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">powerDriveT</span> <span class="o">=</span> <span class="p">(</span><span class="n">errorT</span> <span class="o">*</span> <span class="n">kPT</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">integralT</span> <span class="o">*</span> <span class="n">kIT</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">derivativeT</span> <span class="o">*</span> <span class="n">kDT</span><span class="p">);</span>
    <span class="n">powerDriveConT</span><span class="o">=</span><span class="n">ConvertToDeg</span><span class="p">(</span><span class="n">powerDriveT</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">powerDriveConT</span> <span class="o">&gt;</span> <span class="n">maxSpeedT</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">powerDriveConT</span> <span class="o">=</span> <span class="n">maxSpeedT</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">powerDriveConT</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">maxSpeedT</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">powerDriveConT</span> <span class="o">=</span> <span class="o">-</span><span class="n">maxSpeedT</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">turnPTo</span><span class="p">(</span><span class="kt">double</span> <span class="n">angleTurn</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">iter</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="c1">// Automated error correction loop</span>
    <span class="c1">//Loop runs every 15 miliseconds</span>
    <span class="c1">//This function is in degrees internally and externally</span>
    <span class="c1">//while the error is less than thresholds and the amount of times in the loop is less than threshold</span>
    <span class="c1">// This is to account for when you haven't reached your target but the robot is stuck it may exit the loop</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">)</span> <span class="o">-</span> <span class="n">angleTurn</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">turnToTolerance</span> <span class="o">&amp;&amp;</span> <span class="n">iter</span> <span class="o">&lt;</span> <span class="n">maxIter</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">iter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="c1">//The error is the target angle - current angle </span>
        <span class="n">error</span> <span class="o">=</span> <span class="n">angleTurn</span> <span class="o">-</span> <span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">);</span>
        <span class="c1">//The derivative is the error-previous error</span>
        <span class="c1">//These are defined as 0 before the loop runs</span>
        <span class="n">derivative</span> <span class="o">=</span> <span class="n">error</span> <span class="o">-</span> <span class="n">prevError</span><span class="p">;</span>
        <span class="c1">//Then change the previous error value to the error before the next loop</span>
        <span class="n">prevError</span> <span class="o">=</span> <span class="n">error</span><span class="p">;</span>

        <span class="c1">// Checking if error passes threshold to build the integral</span>
        <span class="c1">//The integral allows you to correct for overshooting so you don't want this to always run</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">turnThreshold</span> <span class="o">&amp;&amp;</span> <span class="n">error</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">integral</span> <span class="o">+=</span> <span class="n">error</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">integral</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// Voltage to use. PID calculation</span>
        <span class="kt">double</span> <span class="n">powerDrive</span> <span class="o">=</span> <span class="n">error</span> <span class="o">*</span> <span class="n">kP</span> <span class="o">+</span> <span class="n">derivative</span> <span class="o">*</span> <span class="n">kD</span> <span class="o">+</span> <span class="n">integral</span> <span class="o">*</span> <span class="n">kI</span><span class="p">;</span>

        <span class="c1">// Capping voltage to max speed</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">powerDrive</span> <span class="o">&gt;</span> <span class="n">maxSpeed</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">powerDrive</span> <span class="o">=</span> <span class="n">maxSpeed</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span> <span class="p">(</span><span class="n">powerDrive</span> <span class="o">&lt;</span> <span class="o">-</span><span class="n">maxSpeed</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">powerDrive</span> <span class="o">=</span> <span class="o">-</span><span class="n">maxSpeed</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// Send voltage to motors</span>
        <span class="n">LeftDriveSmart</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span> <span class="n">powerDrive</span><span class="p">,</span> <span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>
        <span class="n">RightDriveSmart</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span> <span class="o">-</span><span class="n">powerDrive</span><span class="p">,</span> <span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>

        <span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Angle achieved, brake robot</span>
    <span class="n">LeftDriveSmart</span><span class="p">.</span><span class="n">stop</span><span class="p">(</span><span class="n">brake</span><span class="p">);</span>
    <span class="n">RightDriveSmart</span><span class="p">.</span><span class="n">stop</span><span class="p">(</span><span class="n">brake</span><span class="p">);</span>

    <span class="c1">// Tuning data, output to screen</span>
    <span class="n">turnCount</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">angleTurn</span> <span class="o">-</span> <span class="n">TurnGyroSmart</span><span class="p">.</span><span class="n">rotation</span><span class="p">(</span><span class="n">degrees</span><span class="p">);</span>
    <span class="n">derivative</span> <span class="o">=</span> <span class="n">error</span> <span class="o">-</span> <span class="n">prevError</span><span class="p">;</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">clearScreen</span><span class="p">();</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"Turn #: %d"</span><span class="p">,</span> <span class="n">turnCount</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">setCursor</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"iter: %.0f"</span><span class="p">,</span> <span class="n">iter</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"error: %.5f"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">"derivative: %.5f"</span><span class="p">,</span> <span class="n">derivative</span><span class="p">);</span>
    <span class="n">Controller1</span><span class="p">.</span><span class="n">Screen</span><span class="p">.</span><span class="n">newLine</span><span class="p">();</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="n">PID</span><span class="o">::</span><span class="n">driveToP</span><span class="p">(</span><span class="n">Odometry</span> <span class="o">&amp;</span><span class="n">Odom</span><span class="p">,</span><span class="kt">double</span> <span class="n">xTarget</span><span class="p">,</span> <span class="kt">double</span> <span class="n">yTarget</span><span class="p">,</span> <span class="kt">double</span> <span class="n">alpha</span><span class="p">,</span><span class="kt">double</span> <span class="n">beta</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">//the x and y target converted to degrees traveled</span>
  <span class="n">xTargetLocation</span> <span class="o">=</span> <span class="p">(</span><span class="n">xTarget</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>
  <span class="n">yTargetLocation</span> <span class="o">=</span> <span class="p">(</span><span class="n">yTarget</span><span class="o">*</span><span class="mi">360</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">M_PI</span><span class="o">*</span><span class="n">wheelDiameter</span><span class="p">);</span>

  <span class="c1">//the difference between targets - current</span>
  <span class="n">xVector</span> <span class="o">=</span> <span class="n">xTargetLocation</span> <span class="o">-</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getXPosGlobal</span><span class="p">();</span>
  <span class="n">yVector</span> <span class="o">=</span> <span class="n">yTargetLocation</span> <span class="o">-</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getYPosGlobal</span><span class="p">();</span>

  <span class="c1">//while loop of the vector needed to travel and the angle left to turn</span>
  <span class="c1">//once below threshold should exit</span>
  <span class="k">while</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="n">xVector</span><span class="o">*</span><span class="n">xVector</span><span class="o">+</span><span class="n">yVector</span><span class="o">*</span><span class="n">yVector</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">26</span> <span class="o">||</span> <span class="p">(</span><span class="n">atan2</span><span class="p">(</span><span class="n">yVector</span><span class="p">,</span><span class="n">xVector</span><span class="p">)</span><span class="o">-</span><span class="n">Odom</span><span class="p">.</span><span class="n">getAbsoluteAngle</span><span class="p">())</span> <span class="o">&gt;=</span><span class="n">ConvertToRadians</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">xVector</span> <span class="o">=</span> <span class="n">xTargetLocation</span> <span class="o">-</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getXPosGlobal</span><span class="p">();</span>
    <span class="n">yVector</span> <span class="o">=</span> <span class="n">yTargetLocation</span> <span class="o">-</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getYPosGlobal</span><span class="p">();</span>
    <span class="c1">//Activate 2 subPIDs</span>
    <span class="n">PID</span><span class="o">::</span><span class="n">driveToNS</span><span class="p">(</span><span class="n">Odom</span><span class="p">);</span>
    <span class="n">PID</span><span class="o">::</span><span class="n">turnTo</span><span class="p">(</span><span class="n">Odom</span><span class="p">);</span>

    <span class="c1">//the drive power for each motor</span>
    <span class="c1">//combines the drive and turn using alpha to determine the ratio</span>
    <span class="c1">//1=alpha is all turn 0=alpha is all drive</span>
    <span class="n">FrontLeftPower</span> <span class="o">=</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">alpha</span><span class="o">*</span><span class="n">powerDrive</span> <span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">powerDriveCon</span><span class="p">);</span>
    <span class="n">BackLeftPower</span> <span class="o">=</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">alpha</span><span class="o">*</span><span class="n">powerDrive</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">powerDriveCon</span><span class="p">);</span>
    <span class="n">FrontRightPower</span> <span class="o">=</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">alpha</span><span class="o">*</span><span class="n">powerDrive</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">powerDriveCon</span><span class="p">);</span>
    <span class="n">BackRightPower</span> <span class="o">=</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">alpha</span><span class="o">*</span><span class="n">powerDrive</span> <span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">powerDriveCon</span><span class="p">);</span>
   
     <span class="c1">//sends velocity in volts to each motor to actually drive</span>
    <span class="n">FrontLeft</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span><span class="n">FrontLeftPower</span><span class="p">,</span><span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>
    <span class="n">FrontRight</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span><span class="n">FrontRightPower</span><span class="p">,</span><span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>
    <span class="n">BackLeft</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span><span class="n">BackLeftPower</span><span class="p">,</span><span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>
    <span class="n">BackRight</span><span class="p">.</span><span class="n">spin</span><span class="p">(</span><span class="n">forward</span><span class="p">,</span><span class="n">BackRightPower</span><span class="p">,</span><span class="n">voltageUnits</span><span class="o">::</span><span class="n">volt</span><span class="p">);</span>

    <span class="c1">//print data to console for checking</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"      </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"xPos %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getXPosGlobal</span><span class="p">());</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"yPos %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">Odom</span><span class="p">.</span><span class="n">getYPosGlobal</span><span class="p">());</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"sqrt %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">xVector</span><span class="o">*</span><span class="n">xVector</span><span class="o">+</span><span class="n">yVector</span><span class="o">*</span><span class="n">yVector</span><span class="p">));</span>

    <span class="n">printf</span><span class="p">(</span> <span class="s">"atan2 %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">atan2</span><span class="p">(</span><span class="n">yVector</span><span class="p">,</span><span class="n">xVector</span><span class="p">)</span><span class="o">-</span><span class="n">Odom</span><span class="p">.</span><span class="n">getAbsoluteAngle</span><span class="p">());</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"targethe %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">atan2</span><span class="p">(</span><span class="n">yVector</span><span class="p">,</span><span class="n">xVector</span><span class="p">));</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"ytarget %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">yTargetLocation</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"xtarget %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">xTargetLocation</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"FLP %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">FrontLeftPower</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"currtheta %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">Odom</span><span class="p">.</span><span class="n">getAbsoluteAngle</span><span class="p">());</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"turn pd %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">powerDriveCon</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"drivepid pd %.5f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">powerDrive</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"New Iteration00 </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span> <span class="s">"      </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">xVector</span><span class="p">)</span> <span class="o">&lt;=</span><span class="mi">15</span> <span class="o">&amp;&amp;</span> <span class="n">fabs</span><span class="p">(</span><span class="n">yVector</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">15</span> <span class="p">){</span><span class="c1">//&amp;&amp; atan2(yVector,-xVector)-absoluteAngle-M_PI/2&lt;=ConvertToRadians(4)){</span>
      <span class="n">printf</span><span class="p">(</span><span class="s">"exit </span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">task</span><span class="o">::</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">);</span>
  <span class="p">}</span>
<span class="c1">//once while loop is not true stop motors</span>
  <span class="n">FrontLeft</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
  <span class="n">FrontRight</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
  <span class="n">BackRight</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
  <span class="n">BackLeft</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div> <p>The code above depicts this refactor and expansion in Vex CPP. Here is an example of the turn PID running.</p> <div class="row mt-3"> <div class="col-12"> <video class="img-fluid rounded z-depth-1" controls=""> <source src="/assets/video/IMG_9089.mp4" type="video/mp4"></source> Your browser does not support the video tag. </video> </div> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Jessica Hunter. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script src="/assets/js/bibsearch.js?a8796296a5e2f80c5e498cdd51d7761e" type="module"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"Edit the `_data/repositories.yml` and change the `github_users` and `github_repos` lists to include your own GitHub profile and repositories.",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"This is a description of the page. You can modify it in &#39;_pages/cv.md&#39;. You can also change or remove the top pdf download button.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"projects-sql-ssrs",title:"SQL/SSRS",description:"Database Work",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-pid",title:"PID",description:"Control Theory",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-odometry",title:"Odometry",description:"Control Theory the next step",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-machine-learning",title:"Machine Learning",description:"The Basics of Supervised",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-cad",title:"CAD",description:"A Summary",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-vex-v5-competitions",title:"Vex V5 Competitions",description:"Overall Work",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>